<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internetarcade | Quizzes</title>

    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/home.css">
    <style>
        main {
            padding-top: 20px;
        }

        .quiz-card-image {
            width: 250px;
            height: 250px;
            object-fit: cover;
            border: 4px solid black;
        }

        .quiz-card-icon {
            font-size: 4rem;
            color: white;
            text-shadow: 4px 4px 0px black;
        }
    </style>
</head>

<body>

    <div id="header-placeholder"></div>

    <main>
        <div id="quiz-feed-container" class="feed-grid"></div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="assets/js/global.js"></script>
    <script>
        const allQuizzes = [
            {
                id: 1,
                title: "Which Seven Deadly Sins Character Are You? (2026 Edition)",
                excerpt: "Only 1% survive this truth. Our 2026 test swaps old sins for digital habits. Discover if you're a \"Professional Lurker\" or a \"Digital Hoarder.\"",
                category: "Personality",
                date: "2026-01-01",
                link: "/quizzes/which-one-of-the-seven-deadly-sins-are-you-2026-edition.html",
                image: "assets/media/image/the-seven-deadly-sins-quiz-which-sin-are-you.png",
                color: "#BA68C8"
            },
            {
                id: 2,
                title: "Only 1% Can Pass This Mental Age Test: What is Your Brainâ€™s Real Age? (2026 Edition)",
                excerpt: "Think your mind matches your birth year? Most people fail this 2026 Mental Age Test. Take the viral quiz to reveal how old your brain actually is!",
                category: "Vibe Check",
                date: "2026-01-02",
                link: "/quizzes/only-1-percent-mental-age-test.html",
                image: "assets/media/image/only-1-percent-mental-age-test-square.png",
                color: "#FF6B6B"
            },
            {
                id: 3,
                title: "The 2026 Rice Purity Test",
                excerpt: "The 2026 Edition of the famous Rice Purity Test. Tick the boxes for everything you've done, and we'll calculate your innocence score.",
                category: "Personality",
                date: "2026-01-03",
                link: "/quizzes/the-2026-rice-purity-test.html",
                image: "assets/media/image/the-2026-rice-purity-test.png",
                color: "#FF6B6B"
            }
        ];

        function renderQuizzes(list) {
            const feedContainer = document.getElementById('quiz-feed-container');
            if (!feedContainer) return;

            feedContainer.innerHTML = list.map(q => {
                const visualGrid = q.image
                    ? `<img src="${q.image}" class="quiz-card-image" alt="${q.title}">`
                    : `<div class="card-image-placeholder" style="background-color: ${q.color}; height: 250px; display: flex; align-items: center; justify-content: center;">
                <span class="quiz-card-icon">?</span>
               </div>`;

                return `
        <article class="card">
            ${visualGrid}
            <div style="padding: 20px;">
                <div style="margin-bottom: 12px;">
                    <span class="meta-tag" style="font-size: 0.8rem; background-color: #ff6b6b; padding: 2px 8px; border: 2px solid black; font-weight: bold;">${q.category}</span>
                </div>
                <h3 style="margin-bottom: 10px; font-size: 1.2rem;">${q.title}</h3>
                <p style="font-size: 0.9rem; color: #444; margin-bottom: 20px;">${q.excerpt}</p>
                <a href="${q.link}"><button class="read-more-btn" style="width: 100%;">START QUIZ</button></a>
            </div>
        </article>
    `;
            }).join('');
        }

        function smartQuizFilter(query) {
            if (!query) {
                // Fallback to ID sorting if search is cleared
                allQuizzes.sort((a, b) => b.id - a.id);
                renderQuizzes(allQuizzes);
                return;
            }

            const scored = allQuizzes.map(q => {
                let score = 0;
                const title = q.title.toLowerCase();
                const excerpt = q.excerpt.toLowerCase();
                const category = q.category.toLowerCase();

                if (title.includes(query)) score += 30;
                if (excerpt.includes(query)) score += 20;
                if (category.includes(query)) score += 15;

                return { ...q, relevanceScore: score };
            });

            // Sort by Score, then by ID (Descending)
            scored.sort((a, b) => {
                if (b.relevanceScore !== a.relevanceScore) {
                    return b.relevanceScore - a.relevanceScore;
                }
                return b.id - a.id;
            });

            renderQuizzes(scored);
        }

        document.addEventListener("DOMContentLoaded", () => {
            // Initial sort by highest ID
            allQuizzes.sort((a, b) => b.id - a.id);
            renderQuizzes(allQuizzes);

            document.addEventListener('submit', function (e) {
                if (e.target && e.target.id === 'search-form') {
                    e.preventDefault();
                    const searchInput = document.getElementById('search-input');
                    if (!searchInput) return;

                    const query = searchInput.value.trim().toLowerCase();
                    smartQuizFilter(query);
                }
            });
        });
    </script>
</body>

</html>